<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Fire-Mining ‚Äî Final</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    :root{
      --bg1:#071122; --bg2:#081426; --accent:#00f2ff; --accent2:#8b5cf6;
    }
    html,body{height:100%}
    body{
      margin:0;
      font-family:Inter, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
      background: radial-gradient(800px 400px at 10% 10%, rgba(139,92,246,0.06), transparent 8%),
                  radial-gradient(700px 300px at 90% 90%, rgba(0,242,255,0.04), transparent 8%),
                  linear-gradient(180deg,var(--bg1),var(--bg2));
      color:#e6eef8;
      display:flex;
      flex-direction:column;
      -webkit-font-smoothing:antialiased;
      -moz-osx-font-smoothing:grayscale;
      height:100vh;
      overflow:hidden;
    }

    /* Glass card */
    .glass {
      background: linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.008));
      border: 1px solid rgba(255,255,255,0.04);
      backdrop-filter: blur(8px);
      border-radius:12px;
      box-shadow: 0 10px 30px rgba(0,0,0,0.45);
    }

    .app { display:flex; flex-direction:column; height:100%; }
    .page { position:absolute; inset:18px; border-radius:14px; opacity:0; pointer-events:none; display:flex; align-items:center; justify-content:center; transition:all .4s ease; }
    .page.active{opacity:1; pointer-events:auto;}

    /* header */
    header.app-header { display:flex; align-items:center; justify-content:space-between; padding:14px 18px; }
    .logo { display:flex; align-items:center; gap:10px; }
    .logo .dot { width:10px; height:10px; border-radius:50%; background:linear-gradient(90deg,var(--accent),var(--accent2)); }
    .logo h1 { margin:0; font-weight:700; font-size:16px; color:#eafcff; }

    /* miner */
    .miner-card { width:100%; max-width:980px; padding:22px; border-radius:14px; display:flex; gap:20px; align-items:center; justify-content:space-between; background:rgba(255,255,255,0.02); }
    .miner-visual { width:320px; height:200px; border-radius:12px; background:rgba(0,0,0,.2); display:flex; align-items:center; justify-content:center; position:relative; }

    /* tabbar */
    .tabbar{position:fixed;left:50%;transform:translateX(-50%);bottom:20px;width:calc(100% - 40px);max-width:980px;display:flex;gap:8px;justify-content:center;padding:10px;background:rgba(0,0,0,0.32);border-radius:14px;box-shadow:0 10px 30px rgba(0,0,0,0.45);z-index:999;}
    .tab{padding:8px 12px;border-radius:10px;cursor:pointer;}
    .tab.active{background:linear-gradient(90deg,rgba(0,242,255,0.06),rgba(139,92,246,0.04));}

    .auth-wrap { width:420px; max-width:92vw; }
    .field{width:100%;padding:.6rem;border-radius:8px;border:1px solid rgba(255,255,255,0.04);background:rgba(255,255,255,0.02);color:#e6eef8;margin-bottom:8px;}
    .profile-value{max-width:220px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;font-family:monospace;}
  </style>
</head>
<body>
  <div class="app">

    <!-- HEADER -->
    <header class="app-header">
      <div class="logo"><div class="dot"></div><h1>Fire-Mining</h1></div>
      <div id="headerUser" class="text-sm opacity-80">Guest</div>
    </header>

    <!-- PAGES -->
    <main class="pages">

      <!-- AUTH -->
      <section id="authPage" class="page active">
        <div class="glass auth-wrap p-6">
          <h2 class="text-lg font-semibold mb-3 text-center">Masuk atau Daftar</h2>
          <div class="flex gap-3 mb-4">
            <button id="btnShowLogin" class="btn w-full">Login</button>
            <button id="btnShowRegister" class="btn w-full">Register</button>
            <button id="btnShowForgot" class="btn w-full">Lupa Password</button>
          </div>
          <!-- LOGIN -->
          <div id="loginBlock">
            <input id="loginEmail" class="field" type="email" placeholder="Email" />
            <input id="loginUsername" class="field" type="text" placeholder="Username" />
            <input id="loginPassword" class="field" type="password" placeholder="Kata sandi" />
            <div class="flex items-center gap-3 mb-2">
              <div id="captchaText" class="font-mono bg-black/20 px-3 py-2 rounded select-all"></div>
              <button id="refreshCaptcha" class="btn">‚Üª</button>
              <input id="captchaInput" class="field flex-1" placeholder="Masukkan captcha" />
            </div>
            <button id="btnLogin" class="btn btn-start w-full mt-3">Login</button>
          </div>
          <!-- REGISTER -->
          <div id="registerBlock" style="display:none;">
            <input id="regEmail" class="field" type="email" placeholder="Email" />
            <input id="regUsername" class="field" type="text" placeholder="Username" />
            <input id="regPassword" class="field" type="password" placeholder="Kata sandi" />
            <button id="btnRegister" class="btn w-full mt-2">Daftar</button>
          </div>
          <!-- FORGOT -->
          <div id="forgotBlock" style="display:none;">
            <input id="forgotEmail" class="field" type="email" placeholder="Masukkan email untuk reset" />
            <button id="btnForgot" class="btn w-full mt-2">Kirim Link Reset (simulasi)</button>
          </div>
        </div>
      </section>

      <!-- HOME -->
      <section id="homePage" class="page">
        <div class="miner-card glass">
          <div>
            <h3 class="text-lg font-semibold mb-1">Welcome back</h3>
            <p class="text-sm opacity-80 mb-4">Ringkasan mining</p>
            <div class="mini-card glass mx-auto">
              <div class="text-sm opacity-80">Saldo</div>
              <div id="homeBalance" class="text-2xl font-mono mt-1">0.000000 KOT</div>
            </div>
            <div class="mt-4 flex gap-3">
              <button id="startBtn" class="btn btn-start" onclick="startMining()">‚õèÔ∏è Start</button>
              <button id="stopBtn" class="btn btn-stop hidden" onclick="stopMining()">Stop</button>
              <button class="btn" onclick="claim()">Claim</button>
            </div>
          </div>
          <div class="miner-visual"><div id="hashrate">0 H/s</div></div>
        </div>
      </section>

      <!-- WALLET -->
      <section id="walletPage" class="page">
        <div class="miner-card glass flex-col items-center">
          <h3 class="text-lg mb-2">Wallet</h3>
          <div class="mini-card glass">
            <div class="text-sm opacity-80">Total Balance</div>
            <div id="walletBalance" class="text-2xl font-mono mt-1">0.000000</div>
          </div>
        </div>
      </section>

      <!-- PROFILE -->
      <section id="profilePage" class="page">
        <div class="miner-card glass flex-col items-center max-w-md">
          <h3 class="text-cyan-300">Profile</h3>
          <div class="glass p-2 mt-3 flex justify-between"><div>Email</div><div id="profileEmail" class="profile-value"></div></div>
          <div class="glass p-2 mt-3 flex justify-between"><div>Username</div><div id="profileName" class="profile-value"></div></div>
          <button onclick="logout()" class="btn btn-stop w-full mt-4">Logout</button>
        </div>
      </section>

    </main>

    <!-- TABBAR -->
    <nav id="tabbar" class="tabbar hidden">
      <div class="tab active" data-page="homePage" onclick="onTabClick(event)">üè† Home</div>
      <div class="tab" data-page="walletPage" onclick="onTabClick(event)">üí∞ Wallet</div>
      <div class="tab" data-page="profilePage" onclick="onTabClick(event)">üë§ Profile</div>
    </nav>

  </div>

<script>
let miningInterval=null, unclaimed=0, balance=0, currentCaptcha="";

/* Captcha */
function generateCaptcha(){
  const chars="ABCDEFGHJKLMNPQRSTUVWXYZ23456789";
  let text=""; for(let i=0;i<5;i++) text+=chars[Math.floor(Math.random()*chars.length)];
  currentCaptcha=text;
  document.getElementById("captchaText").innerText=text;
}

/* Mining */
function startMining(){
  if(miningInterval) return;
  miningInterval=setInterval(()=>{
    unclaimed+=0.00001;
    document.getElementById("unclaimed")?.innerText=unclaimed.toFixed(6);
    document.getElementById("hashrate").innerText=(Math.random()*100+50).toFixed(2)+" H/s";
    updateUI();
  },1000);
  document.getElementById("startBtn").classList.add("hidden");
  document.getElementById("stopBtn").classList.remove("hidden");
}
function stopMining(){
  clearInterval(miningInterval); miningInterval=null;
  document.getElementById("startBtn").classList.remove("hidden");
  document.getElementById("stopBtn").classList.add("hidden");
  document.getElementById("hashrate").innerText="0 H/s";
}
function claim(){balance+=unclaimed;unclaimed=0;updateUI();}

/* UI */
function showPage(id){
  document.querySelectorAll(".page").forEach(p=>p.classList.remove("active"));
  document.getElementById(id).classList.add("active");
  document.querySelectorAll(".tab").forEach(t=>t.classList.toggle("active",t.dataset.page===id));
}
function onTabClick(e){showPage(e.currentTarget.dataset.page);}
function updateUI(){
  document.getElementById("walletBalance").innerText=balance.toFixed(6)+" KOT";
  document.getElementById("homeBalance").innerText=(balance+unclaimed).toFixed(6)+" KOT";
  localStorage.setItem("balance",balance);
}

/* Auth */
function logout(){
  localStorage.removeItem("auth_user");localStorage.removeItem("username");localStorage.removeItem("email");
  location.reload();
}
function onAppStart(){
  const u=localStorage.getItem("auth_user"),un=localStorage.getItem("username"),em=localStorage.getItem("email"),b=parseFloat(localStorage.getItem("balance")||"0");
  balance=isNaN(b)?0:b;
  if(u&&un){
    document.getElementById("authPage").classList.remove("active");
    document.getElementById("homePage").classList.add("active");
    document.getElementById("tabbar").classList.remove("hidden");
    document.getElementById("profileEmail").innerText=em;
    document.getElementById("profileName").innerText=un;
    document.getElementById("headerUser").innerText=un;
    updateUI();
  } else {
    document.getElementById("authPage").classList.add("active");
    document.getElementById("tabbar").classList.add("hidden");
  }
}

/* Auth events */
btnShowLogin.onclick=()=>{loginBlock.style.display="block";registerBlock.style.display="none";forgotBlock.style.display="none";};
btnShowRegister.onclick=()=>{loginBlock.style.display="none";registerBlock.style.display="block";forgotBlock.style.display="none";};
btnShowForgot.onclick=()=>{loginBlock.style.display="none";registerBlock.style.display="none";forgotBlock.style.display="block";};

btnRegister.onclick=()=>{
  const em=regEmail.value.trim(),un=regUsername.value.trim(),pw=regPassword.value.trim();
  if(!em||!un||!pw) return alert("Isi semua field!");
  localStorage.setItem("email",em);localStorage.setItem("username",un);localStorage.setItem("password",pw);localStorage.setItem("auth_user",true);
  onAppStart();
};
btnLogin.onclick=()=>{
  const em=loginEmail.value.trim(),un=loginUsername.value.trim(),pw=loginPassword.value.trim(),cap=captchaInput.value.trim();
  if(cap!==currentCaptcha) return alert("Captcha salah!");
  if(localStorage.getItem("email")===em&&localStorage.getItem("username")===un&&localStorage.getItem("password")===pw){
    localStorage.setItem("auth_user",true);onAppStart();
  }else alert("Login gagal!");
};
btnForgot.onclick=()=>{
  const em=forgotEmail.value.trim();
  if(em&&localStorage.getItem("email")===em) alert("Simulasi: Link reset terkirim ke "+em); else alert("Email tidak terdaftar.");
};
refreshCaptcha.onclick=()=>generateCaptcha();

window.onload=()=>{generateCaptcha();onAppStart();};
</script>
</body>
</html>
